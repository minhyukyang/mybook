<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Text Mining (Eng) | R Book</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Text Mining (Eng) | R Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Text Mining (Eng) | R Book" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Min Hyuk Yang" />


<meta name="date" content="2022-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#usage"><i class="fa fa-check"></i><b>1.1</b> Usage</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#render-book"><i class="fa fa-check"></i><b>1.2</b> Render book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#preview-book"><i class="fa fa-check"></i><b>1.3</b> Preview book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tm-eng.html"><a href="tm-eng.html"><i class="fa fa-check"></i><b>2</b> Text Mining (Eng)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tm-eng.html"><a href="tm-eng.html#janeaustenr"><i class="fa fa-check"></i><b>2.1</b> janeaustenr</a></li>
<li class="chapter" data-level="2.2" data-path="tm-eng.html"><a href="tm-eng.html#gutenbergr"><i class="fa fa-check"></i><b>2.2</b> gutenbergr</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tm-eng.html"><a href="tm-eng.html#단어-빈도"><i class="fa fa-check"></i><b>2.2.1</b> 단어 빈도</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tm-eng" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Text Mining (Eng)</h1>
<div id="janeaustenr" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> janeaustenr</h2>
<blockquote>
<p>출처 : R로 배우는 텍스트 마이닝</p>
</blockquote>
<p>제인 오스틴(Jane Austen)이 탈고해 출판한 소설 여섯 개를 <a href="https://cran.r-project.org/package=janeaustenr">janeaustenr</a> 패키지 에서 가져온 다음 tidy 형식으로 변형해 보자.</p>
<ul>
<li>janeaustenr 패키지는 텍스트를 1줄당 1행(one-row-per-line) 형식으로 제공</li>
<li><code>mutate()</code>를 사용해 <code>linenumber</code> 수에 해당하는 만큼을 주석으로 처리함으로써 원래 줄 형식을 추적하는데 사용</li>
<li><code>chapter</code>를 사용해 모든 장이 어디부터 나오는지 찾아낸다</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="tm-eng.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janeaustenr)</span>
<span id="cb1-2"><a href="tm-eng.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="tm-eng.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-4"><a href="tm-eng.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="tm-eng.html#cb1-5" aria-hidden="true" tabindex="-1"></a>original_books <span class="ot">&lt;-</span> <span class="fu">austen_books</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="tm-eng.html#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(book) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="tm-eng.html#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">linenumber =</span> <span class="fu">row_number</span>(),</span>
<span id="cb1-8"><a href="tm-eng.html#cb1-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">chapter =</span> <span class="fu">cumsum</span>(<span class="fu">str_detect</span>(text, </span>
<span id="cb1-9"><a href="tm-eng.html#cb1-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">regex</span>(<span class="st">&quot;^chapter [</span><span class="sc">\\</span><span class="st">divxlc]&quot;</span>,</span>
<span id="cb1-10"><a href="tm-eng.html#cb1-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="tm-eng.html#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb1-12"><a href="tm-eng.html#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="tm-eng.html#cb1-13" aria-hidden="true" tabindex="-1"></a>original_books</span>
<span id="cb1-14"><a href="tm-eng.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 73,422 x 4</span></span>
<span id="cb1-15"><a href="tm-eng.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    text                    book                linenumber chapter</span></span>
<span id="cb1-16"><a href="tm-eng.html#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                   &lt;fct&gt;                    &lt;int&gt;   &lt;int&gt;</span></span>
<span id="cb1-17"><a href="tm-eng.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 &quot;SENSE AND SENSIBILITY&quot; Sense &amp; Sensibility          1       0</span></span>
<span id="cb1-18"><a href="tm-eng.html#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 &quot;&quot;                      Sense &amp; Sensibility          2       0</span></span>
<span id="cb1-19"><a href="tm-eng.html#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 &quot;by Jane Austen&quot;        Sense &amp; Sensibility          3       0</span></span>
<span id="cb1-20"><a href="tm-eng.html#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 &quot;&quot;                      Sense &amp; Sensibility          4       0</span></span>
<span id="cb1-21"><a href="tm-eng.html#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 &quot;(1811)&quot;                Sense &amp; Sensibility          5       0</span></span>
<span id="cb1-22"><a href="tm-eng.html#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 &quot;&quot;                      Sense &amp; Sensibility          6       0</span></span>
<span id="cb1-23"><a href="tm-eng.html#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 &quot;&quot;                      Sense &amp; Sensibility          7       0</span></span>
<span id="cb1-24"><a href="tm-eng.html#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 &quot;&quot;                      Sense &amp; Sensibility          8       0</span></span>
<span id="cb1-25"><a href="tm-eng.html#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 &quot;&quot;                      Sense &amp; Sensibility          9       0</span></span>
<span id="cb1-26"><a href="tm-eng.html#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 &quot;CHAPTER 1&quot;             Sense &amp; Sensibility         10       1</span></span>
<span id="cb1-27"><a href="tm-eng.html#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 73,412 more rows</span></span></code></pre></div>
<p>이것을 tidy 데이터셋으로 사용하려면 <code>unnest_tokens()</code> 함수를 사용해 <strong>1행당 1토큰(one-token-per-row)</strong> 형식으로 구성해야 한다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="tm-eng.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb2-2"><a href="tm-eng.html#cb2-2" aria-hidden="true" tabindex="-1"></a>tidy_books <span class="ot">&lt;-</span> original_books <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="tm-eng.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span>
<span id="cb2-4"><a href="tm-eng.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="tm-eng.html#cb2-5" aria-hidden="true" tabindex="-1"></a>tidy_books</span>
<span id="cb2-6"><a href="tm-eng.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 725,055 x 4</span></span>
<span id="cb2-7"><a href="tm-eng.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    book                linenumber chapter word       </span></span>
<span id="cb2-8"><a href="tm-eng.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;fct&gt;                    &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      </span></span>
<span id="cb2-9"><a href="tm-eng.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Sense &amp; Sensibility          1       0 sense      </span></span>
<span id="cb2-10"><a href="tm-eng.html#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Sense &amp; Sensibility          1       0 and        </span></span>
<span id="cb2-11"><a href="tm-eng.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Sense &amp; Sensibility          1       0 sensibility</span></span>
<span id="cb2-12"><a href="tm-eng.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Sense &amp; Sensibility          3       0 by         </span></span>
<span id="cb2-13"><a href="tm-eng.html#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Sense &amp; Sensibility          3       0 jane       </span></span>
<span id="cb2-14"><a href="tm-eng.html#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Sense &amp; Sensibility          3       0 austen     </span></span>
<span id="cb2-15"><a href="tm-eng.html#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Sense &amp; Sensibility          5       0 1811       </span></span>
<span id="cb2-16"><a href="tm-eng.html#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Sense &amp; Sensibility         10       1 chapter    </span></span>
<span id="cb2-17"><a href="tm-eng.html#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Sense &amp; Sensibility         10       1 1          </span></span>
<span id="cb2-18"><a href="tm-eng.html#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Sense &amp; Sensibility         13       1 the        </span></span>
<span id="cb2-19"><a href="tm-eng.html#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 725,045 more rows</span></span></code></pre></div>
<p>이 함수는 <a href="https://github.com/ropensci/tokenizers">tokenizers</a>를 사용해 원래 데이터 프레임에 있는 텍스트의 각 행을 토큰으로 분리한다. 기본 토큰화는 단어에 대한 것이지만 다른 옵션을 사용하면 문자, 엔그램, 문장, 줄, 단락 단위로 토큰호하 할 수 있고, 또는 정규 표혀노식 패턴을 사용해서 분리할 수 있다.</p>
<p>불용어(stop words)는 분석에 유용하지 않은 단어들을 말하며, 일반적으로 영어의 ‘the,’ ‘of,’ ‘to’ 등과 같은 매우 전형적인 단어를 말한다. <code>anti_join()</code>을 사용해 불용어를 제거할 수 있다. 이 때, 사용되는 불용어는 <code>stop_words</code>를 사용한다.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="tm-eng.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb3-2"><a href="tm-eng.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="tm-eng.html#cb3-3" aria-hidden="true" tabindex="-1"></a>tidy_books <span class="ot">&lt;-</span> tidy_books <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="tm-eng.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span>
<span id="cb3-5"><a href="tm-eng.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="tm-eng.html#cb3-6" aria-hidden="true" tabindex="-1"></a>tidy_books</span>
<span id="cb3-7"><a href="tm-eng.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 217,609 x 4</span></span>
<span id="cb3-8"><a href="tm-eng.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    book                linenumber chapter word       </span></span>
<span id="cb3-9"><a href="tm-eng.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;fct&gt;                    &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      </span></span>
<span id="cb3-10"><a href="tm-eng.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Sense &amp; Sensibility          1       0 sense      </span></span>
<span id="cb3-11"><a href="tm-eng.html#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Sense &amp; Sensibility          1       0 sensibility</span></span>
<span id="cb3-12"><a href="tm-eng.html#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Sense &amp; Sensibility          3       0 jane       </span></span>
<span id="cb3-13"><a href="tm-eng.html#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Sense &amp; Sensibility          3       0 austen     </span></span>
<span id="cb3-14"><a href="tm-eng.html#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Sense &amp; Sensibility          5       0 1811       </span></span>
<span id="cb3-15"><a href="tm-eng.html#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Sense &amp; Sensibility         10       1 chapter    </span></span>
<span id="cb3-16"><a href="tm-eng.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Sense &amp; Sensibility         10       1 1          </span></span>
<span id="cb3-17"><a href="tm-eng.html#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Sense &amp; Sensibility         13       1 family     </span></span>
<span id="cb3-18"><a href="tm-eng.html#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Sense &amp; Sensibility         13       1 dashwood   </span></span>
<span id="cb3-19"><a href="tm-eng.html#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Sense &amp; Sensibility         13       1 settled    </span></span>
<span id="cb3-20"><a href="tm-eng.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 217,599 more rows</span></span></code></pre></div>
<p>tidytext 패키지의 <code>stop_words</code> 데이터셋에는 3개의 불용어 용어집(lexicon)이 들어있다. 지금처럼 모두 함께 사용할 수도 있고, 특정 분석에 더 적합한 경우 <code>filter()</code>를 사용해 1개 불용어 집합만 사용할 수도 있다.</p>
<p>또한, dplyr의 <code>count()</code>를 사용해 모든 도서에서 가장 흔하게 나오는 단어를 찾을 수 있다.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="tm-eng.html#cb4-1" aria-hidden="true" tabindex="-1"></a>tidy_books <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="tm-eng.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) </span>
<span id="cb4-3"><a href="tm-eng.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 13,914 x 2</span></span>
<span id="cb4-4"><a href="tm-eng.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    word       n</span></span>
<span id="cb4-5"><a href="tm-eng.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;int&gt;</span></span>
<span id="cb4-6"><a href="tm-eng.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 miss    1855</span></span>
<span id="cb4-7"><a href="tm-eng.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 time    1337</span></span>
<span id="cb4-8"><a href="tm-eng.html#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 fanny    862</span></span>
<span id="cb4-9"><a href="tm-eng.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 dear     822</span></span>
<span id="cb4-10"><a href="tm-eng.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 lady     817</span></span>
<span id="cb4-11"><a href="tm-eng.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 sir      806</span></span>
<span id="cb4-12"><a href="tm-eng.html#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 day      797</span></span>
<span id="cb4-13"><a href="tm-eng.html#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 emma     787</span></span>
<span id="cb4-14"><a href="tm-eng.html#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 sister   727</span></span>
<span id="cb4-15"><a href="tm-eng.html#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 house    699</span></span>
<span id="cb4-16"><a href="tm-eng.html#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 13,904 more rows</span></span></code></pre></div>
<p>단어 카운트(word count) 결과는 tidy data frame에 저장되었기 때문에 아래처럼 ggplot2 패키지로 직접 연결(pipe)할 수 있습니다 (Figure <a href="tm-eng.html#fig:plotcount">2.1</a>).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="tm-eng.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="tm-eng.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="tm-eng.html#cb5-3" aria-hidden="true" tabindex="-1"></a>tidy_books <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="tm-eng.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="tm-eng.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">600</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="tm-eng.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="tm-eng.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, word)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="tm-eng.html#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="tm-eng.html#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:plotcount"></span>
<img src="01-tm-eng_files/figure-html/plotcount-1.png" alt="The most common words in Jane Austen's novels" width="100%" />
<p class="caption">
Figure 2.1: The most common words in Jane Austen’s novels
</p>
</div>
</div>
<div id="gutenbergr" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> gutenbergr</h2>
<p><a href="https://github.com/ropensci/gutenbergr">gutenbergr</a> 패키지는 구텐베르크 프로젝트 모음집 중 공공 저작물에 해당하는 텍스트에 접근할 수 있게 한다. 이 패키지에는 도서를 내려받기 위한 도구와 관심있는 작품을 찾는데 사용할 수 있는 구텐베르크 프로젝트 메타데이터의 전체 데이터셋이 포함되어 있다.</p>
<blockquote>
<p>gutenbergr에 대한 자세한 내용은 rOpenSci의 패키지 튜토리얼(<a href="https://ropensci.org/tutorials/gutenbergr_tutorial/)을" class="uri">https://ropensci.org/tutorials/gutenbergr_tutorial/)을</a> 참조하자.</p>
</blockquote>
<div id="단어-빈도" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> 단어 빈도</h3>
<p>먼저 19세기 말부터 20세기 초반에 걸쳐 살았던 웰스의 공상 과학 소설과 판타지 소설을 살펴보자.</p>
<ul>
<li><a href="https://www.gutenberg.org/ebooks/35"><em>The Time Machine</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/36"><em>The War of the Worlds</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/5230"><em>The Invisible Man</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/159"><em>The Island of Doctor Moreau</em></a></li>
</ul>
<p>우리는 <code>gutenberg_download()</code>와 각 소설에 대한 구텐베르크 프로젝트 식별 번호를 사용해 이러한 작품에 액세스할 수 있다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tm-eng.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb6-2"><a href="tm-eng.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="tm-eng.html#cb6-3" aria-hidden="true" tabindex="-1"></a>hgwells <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">5230</span>, <span class="dv">159</span>))</span>
<span id="cb6-4"><a href="tm-eng.html#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="tm-eng.html#cb6-5" aria-hidden="true" tabindex="-1"></a>tidy_hgwells <span class="ot">&lt;-</span> hgwells <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="tm-eng.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="tm-eng.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span></code></pre></div>
<p>재미 삼아서 웰스의 소설에 가장 공통적으로 나오는 단어는 무엇인지 알아보자.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="tm-eng.html#cb7-1" aria-hidden="true" tabindex="-1"></a>tidy_hgwells <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="tm-eng.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="tm-eng.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11,811 x 2</span></span>
<span id="cb7-4"><a href="tm-eng.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    word       n</span></span>
<span id="cb7-5"><a href="tm-eng.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;int&gt;</span></span>
<span id="cb7-6"><a href="tm-eng.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 time     461</span></span>
<span id="cb7-7"><a href="tm-eng.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 people   302</span></span>
<span id="cb7-8"><a href="tm-eng.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 door     260</span></span>
<span id="cb7-9"><a href="tm-eng.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 heard    249</span></span>
<span id="cb7-10"><a href="tm-eng.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 black    232</span></span>
<span id="cb7-11"><a href="tm-eng.html#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 stood    229</span></span>
<span id="cb7-12"><a href="tm-eng.html#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 white    224</span></span>
<span id="cb7-13"><a href="tm-eng.html#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 hand     218</span></span>
<span id="cb7-14"><a href="tm-eng.html#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 kemp     213</span></span>
<span id="cb7-15"><a href="tm-eng.html#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 eyes     210</span></span>
<span id="cb7-16"><a href="tm-eng.html#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 11,801 more rows</span></span></code></pre></div>
<p>이번에는 브론테(Bronte) 자매의 유명한 작품을 입수해 볼 텐데, 브론테 잗매는 제인 오스틴과 비슷한 시대를 살았지만 오히려 다른 문체로 글을 썼다.</p>
<ul>
<li><a href="https://www.gutenberg.org/ebooks/1260"><em>Jane Eyre</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/768"><em>Wuthering Heights</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/969"><em>The Tenant of Wildfell Hall</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/9182"><em>Villette</em></a></li>
<li><a href="https://www.gutenberg.org/ebooks/767"><em>Agnes Grey</em></a></li>
</ul>
<p>각 소설에 구텐베르크 프로젝트 식별 번호를 다시 사용하고 <code>gutenberg_download()</code>를 사용하면 해당 텍스트에 액세스할 수 있다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="tm-eng.html#cb8-1" aria-hidden="true" tabindex="-1"></a>bronte <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="fu">c</span>(<span class="dv">1260</span>, <span class="dv">768</span>, <span class="dv">969</span>, <span class="dv">9182</span>, <span class="dv">767</span>))</span>
<span id="cb8-2"><a href="tm-eng.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="tm-eng.html#cb8-3" aria-hidden="true" tabindex="-1"></a>tidy_bronte <span class="ot">&lt;-</span> bronte <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="tm-eng.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="tm-eng.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span></code></pre></div>
<p>브론테 자매의 소설에서 가장 자주 출현하는 단어는 무엇인가?</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="tm-eng.html#cb9-1" aria-hidden="true" tabindex="-1"></a>tidy_bronte <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="tm-eng.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-3"><a href="tm-eng.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 23,297 x 2</span></span>
<span id="cb9-4"><a href="tm-eng.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    word       n</span></span>
<span id="cb9-5"><a href="tm-eng.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;int&gt;</span></span>
<span id="cb9-6"><a href="tm-eng.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 time    1065</span></span>
<span id="cb9-7"><a href="tm-eng.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 miss     854</span></span>
<span id="cb9-8"><a href="tm-eng.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 day      825</span></span>
<span id="cb9-9"><a href="tm-eng.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 hand     767</span></span>
<span id="cb9-10"><a href="tm-eng.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 eyes     714</span></span>
<span id="cb9-11"><a href="tm-eng.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 don’t    666</span></span>
<span id="cb9-12"><a href="tm-eng.html#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 night    648</span></span>
<span id="cb9-13"><a href="tm-eng.html#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 heart    638</span></span>
<span id="cb9-14"><a href="tm-eng.html#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 looked   601</span></span>
<span id="cb9-15"><a href="tm-eng.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 door     591</span></span>
<span id="cb9-16"><a href="tm-eng.html#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 23,287 more rows</span></span></code></pre></div>
<p>우레스와 브론테 자매의 작품들에서 모두 “time,” “eyes,” and “hand” 라는 단어가 상위 10위 안에 속 “time,” “ey”time“,”ey Brontë sisters.</p>
<p>이제 제인 오스틴, 브론테 자매 및 웰스의 작품에서 각 단어의 빈도를 계산해 보고 데이터 프레임을 함께 묶자. 우리는 tidyr의 <code>spread()</code>와 <code>gather()</code>를 사용해 데이터 프레임을 재구성함으로써 세 개의 소설을 그려서 비교하기에 알맞게 한다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="tm-eng.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb10-2"><a href="tm-eng.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="tm-eng.html#cb10-3" aria-hidden="true" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(<span class="fu">mutate</span>(tidy_bronte, <span class="at">author =</span> <span class="st">&quot;Brontë Sisters&quot;</span>),</span>
<span id="cb10-4"><a href="tm-eng.html#cb10-4" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">mutate</span>(tidy_hgwells, <span class="at">author =</span> <span class="st">&quot;H.G. Wells&quot;</span>),</span>
<span id="cb10-5"><a href="tm-eng.html#cb10-5" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">mutate</span>(tidy_books, <span class="at">author =</span> <span class="st">&quot;Jane Austen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="tm-eng.html#cb10-6" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">str_extract</span>(word, <span class="st">&quot;[a-z&#39;]+&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="tm-eng.html#cb10-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">count</span>(author, word) <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="tm-eng.html#cb10-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">group_by</span>(author) <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="tm-eng.html#cb10-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>(<span class="at">proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="tm-eng.html#cb10-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="tm-eng.html#cb10-11" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> author, <span class="at">values_from =</span> proportion) <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="tm-eng.html#cb10-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pivot_longer</span>(<span class="st">`</span><span class="at">Brontë Sisters</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">H.G. Wells</span><span class="st">`</span>,</span>
<span id="cb10-13"><a href="tm-eng.html#cb10-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">names_to =</span> <span class="st">&quot;author&quot;</span>,</span>
<span id="cb10-14"><a href="tm-eng.html#cb10-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">values_to =</span> <span class="st">&quot;proportion&quot;</span>)</span>
<span id="cb10-15"><a href="tm-eng.html#cb10-15" aria-hidden="true" tabindex="-1"></a>frequency</span>
<span id="cb10-16"><a href="tm-eng.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 57,116 x 4</span></span>
<span id="cb10-17"><a href="tm-eng.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    word      `Jane Austen` author          proportion</span></span>
<span id="cb10-18"><a href="tm-eng.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb10-19"><a href="tm-eng.html#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 a            0.00000919 Bronte Sisters  0.0000587 </span></span>
<span id="cb10-20"><a href="tm-eng.html#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 a            0.00000919 H.G. Wells      0.0000147 </span></span>
<span id="cb10-21"><a href="tm-eng.html#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 aback       NA          Bronte Sisters  0.00000391</span></span>
<span id="cb10-22"><a href="tm-eng.html#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 aback       NA          H.G. Wells      0.0000147 </span></span>
<span id="cb10-23"><a href="tm-eng.html#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 abaht       NA          Bronte Sisters  0.00000391</span></span>
<span id="cb10-24"><a href="tm-eng.html#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 abaht       NA          H.G. Wells     NA         </span></span>
<span id="cb10-25"><a href="tm-eng.html#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 abandon     NA          Bronte Sisters  0.0000313 </span></span>
<span id="cb10-26"><a href="tm-eng.html#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 abandon     NA          H.G. Wells      0.0000147 </span></span>
<span id="cb10-27"><a href="tm-eng.html#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 abandoned    0.00000460 Bronte Sisters  0.0000900 </span></span>
<span id="cb10-28"><a href="tm-eng.html#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 abandoned    0.00000460 H.G. Wells      0.000177  </span></span>
<span id="cb10-29"><a href="tm-eng.html#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 57,106 more rows</span></span></code></pre></div>
<p>구텐베르그 프로젝트 내 UTF-8로 인코딩된 텍스트에 밑줄을 쳐서 강조한(기울임 꼴처럼) 몇 가지 사례가 들어 있으므로 여기서는 <code>str_extract()</code>를 사용할 것이다. tokenizer는 이렇게 강조 처리한 단어를 강조 처리를 하지 않은 단어와 서로 다른 단어로 여기지만, <code>str_extract()</code>를 사용해 보기 전에 우리가 초기 데이터 탐색 작업을 할 때에 보았듯이 우리는 ’<strong>any</strong>’와 ’any’를 따로 세기를 원하지 않는다.</p>
<p>이제 그래프를 그려보자(Figure <a href="tm-eng.html#fig:plotcompare">2.2</a>).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tm-eng.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb11-2"><a href="tm-eng.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="tm-eng.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 결측값(missing values)이 제거된 행(row)에 대한 경고가 표시될 수 있다.</span></span>
<span id="cb11-4"><a href="tm-eng.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(frequency, <span class="fu">aes</span>(<span class="at">x =</span> proportion, <span class="at">y =</span> <span class="st">`</span><span class="at">Jane Austen</span><span class="st">`</span>, </span>
<span id="cb11-5"><a href="tm-eng.html#cb11-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">abs</span>(<span class="st">`</span><span class="at">Jane Austen</span><span class="st">`</span> <span class="sc">-</span> proportion))) <span class="sc">+</span></span>
<span id="cb11-6"><a href="tm-eng.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">color =</span> <span class="st">&quot;gray40&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb11-7"><a href="tm-eng.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">height =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb11-8"><a href="tm-eng.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> word), <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb11-9"><a href="tm-eng.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb11-10"><a href="tm-eng.html#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb11-11"><a href="tm-eng.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.001</span>), </span>
<span id="cb11-12"><a href="tm-eng.html#cb11-12" aria-hidden="true" tabindex="-1"></a>                       <span class="at">low =</span> <span class="st">&quot;darkslategray4&quot;</span>, <span class="at">high =</span> <span class="st">&quot;gray75&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-13"><a href="tm-eng.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>author, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="tm-eng.html#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-15"><a href="tm-eng.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Jane Austen&quot;</span>, <span class="at">x =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:plotcompare"></span>
<img src="01-tm-eng_files/figure-html/plotcompare-1.png" alt="Comparing the word frequencies of Jane Austen, the Bronte sisters, and H.G. Wells" width="100%" />
<p class="caption">
Figure 2.2: Comparing the word frequencies of Jane Austen, the Bronte sisters, and H.G. Wells
</p>
</div>
<p>이 그림들 중에서 점선에 가까운 단어는 두 텍스트 집합에서 모두 비슷한 빈도를 보이는데, 예를 들면 오스틴과 브론테의 텍스트를 비교한 경우(빈도가 높은 상단에 ‘miss,’ ‘tiem,’ ‘day’가 있음)와 오스틴과 웰스의 텍스트를 비교한 경우(빈도가 높은 상단에 ’time,’ ‘day,’ ‘brother’가 있음)를 들 수 있다. 점선에서 멀리 떨어져 있는 단어는 어느 한쪽 텍스트 집합에서만 더 많이 발견되는 단어다. 예를 들어 오스틴-브론테 비교 그림에서 ’elizabeth,’ ‘anne,’ ‘fanny’와 같은 단어(모두 고유 명사)는 오스틴의 텍스트에는 많지만 브론테 텍스트에는 많지 않고, ’arthur’와 ’dog’는 브론테 텍스트에는 있지만 오스틴 텍스트에는 없다. 웰스를 제인 오스틴과 비교해 보면 웰스가 쓰는 ’beast,’ ‘guns,’ ‘feet,’ ‘black’과 같은 단어를 오스틴은 쓰지 않는 반면에, 오스틴이 사용하는 ’family,’ ‘friend,’ ‘letter,’ ’dear’와 같은 단어를 웰스는 쓰지 않는다.</p>
<p>전반적으로 그림에서 오스틴-브론테 비교 그래프에 나오는 단어들이 오스틴-웰스 비교 그래프에 나오는 것보다 기울게 그어진 점선에 더 가까이 있다는 점에 주목하자. 또한 단어가 오스틴-브론테 그래프에서 빈도가 더 낮은 곳까지 퍼져 있다는 점에 주목하자. 오스텐-웰스 비교 그래프에서 빈도가 낮은 곳이 비어있다. 이러한 특성은 오스틴이 웰스보다는 브론테와 더 비슷한 단어를 사용함을 나타낸다. 또한 우리는 모든 단어가 세 가지 집합으로 이뤄진 텍스트 모두에 나오지는 않는다는 점과, 오스틴과 웰스의 빈도를 나타낸 그래프에 데이터 점이 적다는 것을 알 수 있다.</p>
<p>이러한 단어 집합의 유사성과 차이점을 상관 검정을 통해 정량화(quantify, 수량화)해 보자. 오스틴과 브론테 자매 사이, 오스틴과 웰스 사이의 단어 빈도는 어떤 상관(correlation)이 있는가?</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="tm-eng.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(<span class="at">data =</span> frequency[frequency<span class="sc">$</span>author <span class="sc">==</span> <span class="st">&quot;Brontë Sisters&quot;</span>,],</span>
<span id="cb12-2"><a href="tm-eng.html#cb12-2" aria-hidden="true" tabindex="-1"></a>         <span class="sc">~</span> proportion <span class="sc">+</span> <span class="st">`</span><span class="at">Jane Austen</span><span class="st">`</span>)</span>
<span id="cb12-3"><a href="tm-eng.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-4"><a href="tm-eng.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Pearson&#39;s product-moment correlation</span></span>
<span id="cb12-5"><a href="tm-eng.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-6"><a href="tm-eng.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; data:  proportion and Jane Austen</span></span>
<span id="cb12-7"><a href="tm-eng.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; t = 111.06, df = 10346, p-value &lt; 2.2e-16</span></span>
<span id="cb12-8"><a href="tm-eng.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; alternative hypothesis: true correlation is not equal to 0</span></span>
<span id="cb12-9"><a href="tm-eng.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span id="cb12-10"><a href="tm-eng.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0.7285370 0.7461189</span></span>
<span id="cb12-11"><a href="tm-eng.html#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sample estimates:</span></span>
<span id="cb12-12"><a href="tm-eng.html#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       cor </span></span>
<span id="cb12-13"><a href="tm-eng.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.7374529</span></span>
<span id="cb12-14"><a href="tm-eng.html#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(<span class="at">data =</span> frequency[frequency<span class="sc">$</span>author <span class="sc">==</span> <span class="st">&quot;H.G. Wells&quot;</span>,], </span>
<span id="cb12-15"><a href="tm-eng.html#cb12-15" aria-hidden="true" tabindex="-1"></a>         <span class="sc">~</span> proportion <span class="sc">+</span> <span class="st">`</span><span class="at">Jane Austen</span><span class="st">`</span>)</span>
<span id="cb12-16"><a href="tm-eng.html#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-17"><a href="tm-eng.html#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Pearson&#39;s product-moment correlation</span></span>
<span id="cb12-18"><a href="tm-eng.html#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-19"><a href="tm-eng.html#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; data:  proportion and Jane Austen</span></span>
<span id="cb12-20"><a href="tm-eng.html#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; t = 35.229, df = 6008, p-value &lt; 2.2e-16</span></span>
<span id="cb12-21"><a href="tm-eng.html#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; alternative hypothesis: true correlation is not equal to 0</span></span>
<span id="cb12-22"><a href="tm-eng.html#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span id="cb12-23"><a href="tm-eng.html#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0.3925914 0.4345047</span></span>
<span id="cb12-24"><a href="tm-eng.html#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sample estimates:</span></span>
<span id="cb12-25"><a href="tm-eng.html#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       cor </span></span>
<span id="cb12-26"><a href="tm-eng.html#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.4137673</span></span></code></pre></div>
<p>우리가 그래프에서 볼 수 있었듯이 오스틴과 웰스 사이보다는 오스틴과 브론테 소설 사이에서 단어의 빈도가 더 많이 연관되어 있다.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/minhyukyang/mybook/edit/master/01-tm-eng.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
